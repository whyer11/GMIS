//
   Created by whyer on 14-2-9.
extends layout

block content
  script(src='../javascripts/addclasses.js')
  script(src='../javascripts/jquery.ztree.core-3.5.js')
  script(src='../javascripts/jquery.ztree.excheck-3.5.js')
  script(src='../javascripts/jquery.ztree.exedit-3.5.js')
  script(charset="utf-8" id="seajsnode" src="http://static.alipayobjects.com/seajs/1.3.1/??sea.js,plugin-combo.js")
  script.
    seajs.config({
      alias : {
        '$' : 'gallery/jquery/1.7.2/jquery',
        'validator' : 'arale/validator/0.9.4/validator'

      }
    });
    $(function(){
      seajs.use([ '$', 'validator' ], function($, Validator){
        var validator = new Validator({
          element : '#election',
          onFormValidated : function(err, results, form) {
            window.console && console.log&& console.log(err, results, form);
          },
          failSilently : true
        });
        validator.addItem({
          element:'#class_name',
          required:true,
          rule:'text'
        });
        var i=0;
        var validateItems=[];
        $('#newprop').click(function(){
          $('#props').append('<li class="span4"><div class="thumbnail">' +
        '<label>属性名称</label>' +
        '<input name="PROP_NAME" type="text" PLACEHOLDER="属性名称">' +
        '<label>属性列名</label>' +
        '<input name="PROP_COL" type="text">' +
        '<label>属性列属性</label>' +
        '<input name="PROP_DBMS_TYPE" type="text">' +
        '<label>属性长度</label>' +
        '<input name="PROP_LENGTH" type="text">' +
        '</div></li>');
          //TODO
          validateItems[i]={
            element:'#class_prop_"+i+"',
            required:true,
            rule:'email'
          }
          validator.addItem(validateItems[i]);
          i++;
        });
      })
    });
  div.container
    div#addclass_name.pull-left
      ul#treeDemo.ztree
    div#addclass_props.pull-left
  form.form-horizontal#election(action="/add_child_classes",method="post")
    input#parent_class_id(name="parent_class_id",type="hidden")
    div.modal.fade.mymodal#myModal(tabindex="-1",role="dialog",aria-labelledby="myModalLabel",aria-hidden="true")
      div.modal-header
        button.close(type="button",data-dismiss="modal",aria-hidden="true") &times;
        h3 新建子类型
      div.modal-body
        div.row-fluid
          div.span4
            label 类型名称
            input#class_name(name="class_name",type="text",placeholder="类型名称")
            label 类型表名称
            input#class_tab_name(name="class_tab_name",type="text",placeholder="类型表名称")
          div.span8.pull-left
            h3 属性
            ul.thumbnails#props
            a.btn.btn-info#newprop 新建属性
      div.modal-footer
        input.btn(type="submit")
        button.btn 关闭


